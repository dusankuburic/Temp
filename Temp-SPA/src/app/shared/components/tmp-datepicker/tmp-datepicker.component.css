/**
 * OBSIDIAN NOIR - Datepicker Component
 * Date input with calendar picker and teal glow effects
 */

/* ===================================
 * BASE DATEPICKER
 * =================================== */

.tmp-datepicker-wrapper {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
}

.tmp-datepicker-container {
  /* Layout */
  position: relative;
  display: flex;
  align-items: center;

  /* Visual */
  background-color: var(--color-surface-2);
  border: 1px solid var(--color-border-default);
  border-radius: var(--border-radius-medium);

  /* Transitions */
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Min height */
  min-height: 56px;

  /* Overflow */
  overflow: hidden;
}

/* ===================================
 * DATEPICKER FIELD (Input)
 * =================================== */

.tmp-datepicker-field {
  /* Reset */
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  outline: none;
  margin: 0;
  box-shadow: none !important;
  padding: 0 !important;

  /* Layout */
  flex: 1;
  width: 100%;
  flex: 1;
  width: 100%;
  padding: 20px 48px 8px 16px !important;

  /* Typography */
  font-family: var(--font-family-base);
  font-size: var(--font-size-300);
  font-weight: var(--font-weight-regular);
  line-height: 1.4;
  color: var(--color-foreground-1);

  /* Cursor */
  cursor: pointer;

  /* Transitions */
  transition: padding 150ms ease;
}

.tmp-datepicker-field::placeholder {
  color: transparent;
}

.tmp-datepicker-field:focus::placeholder {
  color: var(--color-foreground-3);
}

.tmp-datepicker-field:focus,
.tmp-datepicker-field:hover,
.tmp-datepicker-field:active {
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
  outline: none !important;
}

.tmp-datepicker-field:disabled {
  cursor: not-allowed;
  color: var(--color-foreground-4);
}

/* ===================================
 * FLOATING LABEL
 * =================================== */

.tmp-datepicker-label {
  /* Position */
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);

  /* Typography */
  font-size: var(--font-size-300);
  font-weight: var(--font-weight-regular);
  color: var(--color-foreground-3);

  /* Pointer events */
  pointer-events: none;
  user-select: none;

  /* Transitions */
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: left center;
  padding: 0 4px;
  margin-left: -4px;
}

/* Label floats up when filled or focused */
.tmp-datepicker-filled .tmp-datepicker-label,
.tmp-datepicker-focused .tmp-datepicker-label,
.tmp-datepicker-field:focus + .tmp-datepicker-label {
  transform: translateY(-155%) scale(0.8);
  font-size: var(--font-size-200);
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.02em;
  color: var(--color-foreground-3);
}

/* Focus label - Teal accent */
.tmp-datepicker-focused .tmp-datepicker-label {
  color: var(--color-brand-primary);
}

/* ===================================
 * DATEPICKER TOGGLE
 * =================================== */

.tmp-datepicker-toggle {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-foreground-3);
  z-index: 10;
}

.tmp-datepicker-toggle button {
  color: inherit;
}

.tmp-datepicker-focused .tmp-datepicker-toggle {
  color: var(--color-brand-primary);
}

/* ===================================
 * STATES
 * =================================== */

/* Hover State */
.tmp-datepicker-container:hover:not(.tmp-datepicker-disabled):not(.tmp-datepicker-error):not(.tmp-datepicker-focused) {
  border-color: var(--color-border-strong);
  background-color: var(--color-surface-3);
}

/* Focus State - Teal Glow */
.tmp-datepicker-focused:not(.tmp-datepicker-disabled):not(.tmp-datepicker-error) {
  border-color: var(--color-brand-primary);
  box-shadow: var(--shadow-glow-teal-sm), var(--shadow-focus-inset);
  background-color: var(--color-surface-2);
}

/* Error State */
.tmp-datepicker-error {
  border-color: var(--color-error-primary);
}

.tmp-datepicker-error:hover:not(.tmp-datepicker-disabled) {
  border-color: var(--color-error-400);
}

.tmp-datepicker-error.tmp-datepicker-focused {
  border-color: var(--color-error-primary);
  box-shadow: var(--shadow-glow-error), inset 0 0 0 1px var(--color-error-primary);
}

.tmp-datepicker-error .tmp-datepicker-label {
  color: var(--color-error-primary);
}

.tmp-datepicker-error .tmp-datepicker-icon {
  color: var(--color-error-primary);
}

/* Disabled State */
.tmp-datepicker-disabled {
  background-color: var(--color-surface-3);
  border-color: var(--color-border-subtle);
  opacity: 0.5;
  cursor: not-allowed;
}

.tmp-datepicker-disabled .tmp-datepicker-field {
  cursor: not-allowed;
  color: var(--color-foreground-4);
}

.tmp-datepicker-disabled .tmp-datepicker-label {
  color: var(--color-foreground-4);
}

/* ===================================
 * ERROR MESSAGE
 * =================================== */

.tmp-datepicker-error-message {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  animation: slide-in 200ms ease;
}

@keyframes slide-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tmp-datepicker-error-text {
  font-size: var(--font-size-200);
  font-weight: var(--font-weight-regular);
  color: var(--color-error-primary);
  line-height: 1.4;
  margin: 0;
}

/* ===================================
 * ACCESSIBILITY
 * =================================== */

/* High contrast mode */
@media (prefers-contrast: high) {
  .tmp-datepicker-container {
    border-width: 2px;
  }

  .tmp-datepicker-error {
    border-width: 3px;
  }

  .tmp-datepicker-focused {
    border-width: 3px;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .tmp-datepicker-container,
  .tmp-datepicker-label,
  .tmp-datepicker-toggle,
  .tmp-datepicker-error-message {
    transition: none !important;
    animation: none !important;
  }
}

/* Focus visible (keyboard navigation) */
.tmp-datepicker-field:focus-visible {
  outline: none;
}

/* ===================================
 * RESPONSIVE DESIGN
 * =================================== */

@media (max-width: 576px) {
  .tmp-datepicker-field {
    font-size: var(--font-size-300);
    padding-right: 70px;
  }

   .tmp-datepicker-label {
    font-size: var(--font-size-300);
  }
}

/* ===================================
 * MATERIAL DATEPICKER OVERRIDES
 * =================================== */

/* Panel Background */
::ng-deep .mat-datepicker-content {
  background-color: var(--color-surface-2) !important;
  border: 1px solid var(--color-border-subtle);
  box-shadow: var(--shadow-32);
  border-radius: var(--border-radius-large);
}

::ng-deep .mat-calendar {
  font-family: var(--font-family-base) !important;
  background-color: transparent !important;
}

/* Header (Year/Month) */
::ng-deep .mat-calendar-header {
  background: var(--gradient-brand);
  padding: 8px 0;
  border-radius: var(--border-radius-large) var(--border-radius-large) 0 0;
  color: var(--color-foreground-on-brand) !important;
}

::ng-deep .mat-calendar-controls {
  margin: 0 !important;
}

::ng-deep .mat-calendar-spacer {
  display: none;
}

::ng-deep .mat-calendar-period-button {
  color: var(--color-foreground-on-brand) !important;
  font-family: var(--font-family-display);
  font-weight: 700;
}

::ng-deep .mat-calendar-arrow {
  fill: var(--color-foreground-on-brand) !important;
  border-top-color: currentColor !important;
}

::ng-deep .mat-calendar-previous-button,
::ng-deep .mat-calendar-next-button {
  color: var(--color-foreground-on-brand) !important;
}

/* Calendar Body */
::ng-deep .mat-calendar-table-header th {
  color: var(--color-foreground-3) !important;
  font-weight: 500;
}

::ng-deep .mat-calendar-body-label {
  color: var(--color-foreground-3) !important;
}

::ng-deep .mat-calendar-body-cell-content {
  color: var(--color-foreground-1) !important;
  border-radius: 50%;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* Hover State */
::ng-deep .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
  background-color: rgba(45, 212, 191, 0.1) !important;
}

/* Selected State */
::ng-deep .mat-calendar-body-selected {
  background: var(--gradient-brand) !important;
  color: var(--color-foreground-on-brand) !important;
  box-shadow: 0 0 10px rgba(45, 212, 191, 0.4);
}

/* Today State */
::ng-deep .mat-calendar-body-today:not(.mat-calendar-body-selected) {
  border-color: var(--color-brand-primary) !important;
}

/* Disabled State */
::ng-deep .mat-calendar-body-disabled > .mat-calendar-body-cell-content {
  color: var(--color-foreground-4) !important;
  opacity: 0.5;
}

/* Year/Multi-year View */
::ng-deep .mat-calendar-body-cell-content.mat-focus-indicator {
  border-radius: 50%;
}
