<div class="group-list-header">
  <div class="group-list-title-section">
    <h1 class="group-list-title">{{organization.name}} Groups</h1>
    <p class="group-list-subtitle">Manage groups within this organization</p>
  </div>
</div>

<div class="group-list-container">
  <tmp-card variant="subtle" class="group-list-filters-card">
    <div class="group-list-filters-header">
      <h3 class="group-list-filters-title">Filters</h3>
      <tmp-button variant="success" size="small" (clicked)="openCreateModal(organization.id)" ariaLabel="Create group">
        <fa-icon [icon]="plusIcon" [size]="'xl'"></fa-icon>
        <span style="margin-left: var(--spacing-xs);">Create</span>
      </tmp-button>
    </div>
    <form class="group-list-filters-form" [formGroup]="filtersForm">
      <tmp-select [options]="teamSelect" label="Teams" formControlName="withTeams" [isFilter]="true"></tmp-select>
      <tmp-input placeholder="Name" label="Name" formControlName="name" [isFilter]="true"></tmp-input>
    </form>
  </tmp-card>

  <tmp-card variant="filled" class="group-list-table-card">
    <tmp-table
      [columns]="columns"
      [data]="innerGroups"
      [striped]="true"
      [hoverable]="true"
      emptyMessage="No groups found">

      <ng-template #rowTemplate let-group>
        <tr>
          <td>{{ group.name }}</td>
          <td class="text-center">
            <div class="tmp-button-group">
              <tmp-button variant="primary" size="small" (clicked)="openEditModal(group.id, organization.id)" ariaLabel="Edit group {{group.name}}">
                <fa-icon [icon]="editGroupIcon" [size]="'lg'"></fa-icon>
              </tmp-button>
              <tmp-button variant="danger" size="small" (clicked)="changeStatus(group.id)" ariaLabel="Archive group {{group.name}}">
                <fa-icon [icon]="archiveGroupIcon" [size]="'lg'"></fa-icon>
              </tmp-button>
            </div>
          </td>
          <td class="text-center">
            <div class="tmp-button-group">
              <tmp-button
                [variant]="group.hasActiveTeam ? 'warning' : 'danger'"
                size="small"
                [routerLink]="['/teams/group/', group.id]"
                ariaLabel="View teams for {{group.name}}">
                <fa-icon [icon]="innerTeamsIcon" [size]="'lg'"></fa-icon>
              </tmp-button>
              <tmp-button variant="info" size="small" [routerLink]="['/teams/create/group/', group.id]" ariaLabel="Create team for {{group.name}}">
                <fa-icon [icon]="plusIcon" [size]="'lg'"></fa-icon>
              </tmp-button>
            </div>
          </td>
        </tr>
      </ng-template>
    </tmp-table>
  </tmp-card>

  <div class="group-list-pagination">
    <tmp-pagination
      [totalCount]="pagination.totalItems"
      [pageSize]="pagination.itemsPerPage"
      [pageNumber]="pagination.currentPage"
      (pageChanged)="pageChanged($event)">
    </tmp-pagination>
  </div>
</div>