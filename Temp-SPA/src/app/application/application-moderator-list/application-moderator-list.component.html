<div class="application-header">
    <div class="application-title-section">
        <h1 class="application-title">Application Search</h1>
        <p class="application-subtitle">Review and manage pending applications</p>
    </div>
</div>

<tmp-card variant="filled" class="application-table-card">
    @if (applications && applications.length) {
        <tmp-table [hoverable]="true" [striped]="true">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Username</th>
                    <th>Created At</th>
                    <th>Status</th>
                    <th class="text-center">Options</th>
                </tr>
            </thead>
            <tbody>
                @for (application of applications; track application.id) {
                <tr>
                    <td>{{application.category}}</td>
                    <td>{{application.username}}</td>
                    <td>{{application.createdAt | date}}</td>
                    <td>
                        @if (application.status === true) {
                            <tmp-badge color="success" variant="filled">
                                <fa-icon [icon]="eyeIcon" [size]="'lg'"></fa-icon>
                                <span style="margin-left: var(--spacing-xs);">Reviewed</span>
                            </tmp-badge>
                        }
                        @if (application.status === false) {
                            <tmp-badge color="error" variant="filled">
                                <fa-icon [icon]="eyeIcon" [size]="'lg'"></fa-icon>
                                <span style="margin-left: var(--spacing-xs);">Pending</span>
                            </tmp-badge>
                        }
                    </td>
                    <td class="text-center">
                        <div style="display: flex; gap: var(--spacing-xs); justify-content: center;">
                            @if (application.status === false) {
                                <tmp-button variant="info" size="small" (clicked)="updateStatus(application.id, application.teamId)" ariaLabel="Update status for {{application.username}}">
                                    <fa-icon [icon]="bookmarkIcon" [size]="'lg'"></fa-icon>
                                </tmp-button>
                            }
                            <tmp-button variant="primary" size="small" [routerLink]="['/applications/moderator/', application.id]" ariaLabel="View application from {{application.username}}">
                                <fa-icon [icon]="eyeIcon" [size]="'lg'"></fa-icon>
                            </tmp-button>
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </tmp-table>
    }
    @if (!applications || applications.length === 0) {
        <div class="application-empty-state">
            <div class="application-empty-icon">
                <fa-icon [icon]="eyeIcon" [size]="'xl'" size="3x"></fa-icon>
            </div>
            <h3>No Applications Found</h3>
            <p>There are no applications to review at this time.</p>
        </div>
    }
</tmp-card>

