<div class="modal-header-obsidian">
    <h4 class="modal-title-obsidian">{{title}}</h4>
    <button type="button" class="modal-close-obsidian" aria-label="Close" (click)="bsModalRef.hide()">
        <span class="modal-close-icon" aria-hidden="true">Ã—</span>
    </button>
</div>
<div class="modal-body-obsidian">
    <form [formGroup]="createEmployeeForm" (ngSubmit)="create()">
        <div class="modal-form-section">
            <tmp-input [formControl]="firstName" [label]="'First Name'" [placeholder]="'Enter First Name'"></tmp-input>
            <tmp-input [formControl]="lastName" [label]="'Last Name'" [placeholder]="'Last Name'"></tmp-input>

            <tmp-card variant="subtle" class="employee-profile-card">
                <h4 class="section-title">Profile Photo (Optional)</h4>
                <div class="employee-profile-header">
                    <tmp-avatar
                        [profilePictureUrl]="profilePicturePreviewUrl"
                        [displayName]="firstName.value + ' ' + lastName.value"
                        [size]="'large'"
                        [shape]="'circle'">
                    </tmp-avatar>

                    <div class="employee-photo-actions">
                        <label class="modal-file-label" for="employeeProfilePhoto">Choose photo</label>
                        <input
                            id="employeeProfilePhoto"
                            class="modal-file-input"
                            type="file"
                            accept="image/*"
                            (change)="onProfilePhotoSelected($event)">

                        @if (profilePicturePreviewUrl) {
                            <button type="button" class="modal-file-clear" (click)="clearProfilePhoto()">Remove</button>
                        }
                        <p class="modal-file-hint">Photo uploads after you create the employee.</p>
                    </div>
                </div>
            </tmp-card>

            <tmp-select
                [options]="organizationsSelect"
                [label]="'Organization'"
                formControlName="organizationId"
                (change)="loadInnerGroups(createEmployeeForm.get('organizationId')?.value)">
            </tmp-select>
            @if (createEmployeeForm.get('organizationId')?.value) {
                <tmp-select
                    [options]="innerGroupsSelect"
                    [label]="'Group'"
                    formControlName="groupId"
                    (change)="loadInnerTeams(createEmployeeForm.get('groupId')?.value)">
                </tmp-select>
            }
            @if (createEmployeeForm.get('groupId')?.value) {
                <tmp-select [options]="innerTeamsSelect" [label]="'Team'" formControlName="teamId"></tmp-select>
            }
        </div>

        <div class="modal-actions">
            <tmp-button type="submit" variant="success" [disabled]="!createEmployeeForm.valid">Create Employee</tmp-button>
        </div>
    </form>
</div>
