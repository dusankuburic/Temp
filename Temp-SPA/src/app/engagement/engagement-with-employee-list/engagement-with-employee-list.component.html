<div class="engagement-header">
    <div class="engagement-title-section">
        <h1 class="engagement-title">Employees With Engagement</h1>
        <p class="engagement-subtitle">View and manage employees who are currently engaged</p>
    </div>
</div>

<div class="engagement-container">
    <tmp-card variant="filled" class="engagement-filters-card">
        <form class="form" [formGroup]="filtersForm">
            <div class="engagement-filters">
                <tmp-select [options]="rolesSelect" [label]="'Role'" formControlName="role" [isFilter]="true"></tmp-select>
                <tmp-input [placeholder]="'First Name'" [label]="'First Name'" formControlName="firstName" [isFilter]="true"></tmp-input>
                <tmp-input [placeholder]="'Last Name'" [label]="'Last Name'" formControlName="lastName" [isFilter]="true"></tmp-input>
            </div>
        </form>
    </tmp-card>

    <tmp-card variant="filled" class="engagement-table-card">
        @if (isLoading || employees.length) {
            <tmp-table 
                [data]="employees" 
                [columns]="columns" 
                [hoverable]="true" 
                [striped]="true" 
                [loading]="isLoading">
                
                <ng-template #rowTemplate let-employee>
                    <tr>
                        <td>{{employee.firstName}}</td>
                        <td>{{employee.lastName}}</td>
                        <td>
                            @if (employee.role === 'Admin') {
                                <tmp-badge color="warning" variant="filled">Admin</tmp-badge>
                            }
                            @if (employee.role === 'User') {
                                <tmp-badge color="brand" variant="filled">User</tmp-badge>
                            }
                            @if (employee.role === 'Moderator') {
                                <tmp-badge color="success" variant="filled">Moderator</tmp-badge>
                            }
                            @if (employee.role === 'None') {
                                <tmp-badge color="neutral" variant="subtle">None</tmp-badge>
                            }
                        </td>
                        <td class="text-center">
                            <tmp-button variant="primary" size="small" (clicked)="openCreateModal(employee.id)" ariaLabel="Add engagement to {{employee.firstName}} {{employee.lastName}}">
                                <fa-icon [icon]="addEngagementIcon" [size]="'lg'"></fa-icon>
                                <span class="btn-text">Add Engagement</span>
                            </tmp-button>
                        </td>
                    </tr>
                </ng-template>
            </tmp-table>
        }
        @if (!isLoading && !employees.length) {
            <div class="engagement-empty-state">
                <div class="engagement-empty-icon">
                    <fa-icon [icon]="addEngagementIcon" [size]="'xl'" size="3x"></fa-icon>
                </div>
                <h3>No Employees Found</h3>
                <p>There are no employees with engagement matching your filters.</p>
            </div>
        }
    </tmp-card>

    <div class="engagement-pagination">
        <tmp-pagination
            [totalCount]="pagination.totalItems"
            [pageSize]="pagination.itemsPerPage"
            [pageNumber]="pagination.currentPage"
            (pageChanged)="pageChanged($event)">
        </tmp-pagination>
    </div>
</div>    

