
<h1 class="text-center">Create Employee Engagement</h1>
<div class="row justify-content-center">
    <div class="col-lg-5 pt-3">
      <div class="alert alert-info text-center" role="alert">
        <h4>Name: {{this.employee?.firstName}}  {{employee?.lastName}}</h4>
    </div>

      <form class="row g-2" [formGroup]="createEngagementForm" (ngSubmit)="create()">

          <div class="form-group">
              <h4>Workplaces</h4>
              <select [ngClass]="{'is-invalid': createEngagementForm.get('workplaceId').errors
              && createEngagementForm.get('workplaceId').touched}"
              formControlName="workplaceId"
              class="form-control">
              <option [ngValue]="null" disabled>Select Workplace</option>
              <option *ngFor="let workplace of workplaces" [ngValue]="workplace.id">
                {{workplace.name}}
              </option>
            </select>      
            <div class="invalid-feedback">Please choose a workplace</div>                                     
          </div>

          <div class="form-group">
            <tmp-input [formControl]="salary" [type]="'number'" [label]="'Salary'" [placeholder]="'Enter Salary'"></tmp-input>
          </div>
          <div class="form-group">
            <tmp-datepicker [formControl]="dateFrom" [label]="'Date From'" [placeholder]="'Enter Date From'"></tmp-datepicker>
          </div>
          <div class="form-group">
            <tmp-datepicker [formControl]="dateTo" [label]="'Date To'" [placeholder]="'Enter Date To'"></tmp-datepicker>
          </div>

          <div class="form-group">
            <h4>Employment statuses</h4>        
            <select [ngClass]="{'is-invalid': createEngagementForm.get('employmentStatusId').errors
            && createEngagementForm.get('employmentStatusId').touched}"
            formControlName="employmentStatusId"
            class="form-control">
            <option [ngValue]="null" disabled>Select Employment Status</option>
            <option *ngFor="let epStatus of employmentStatuses" [ngValue]="epStatus.id">
              {{epStatus.name}}
            </option>
            </select>           
            <div class="invalid-feedback">Please choose a employment status</div>                     
          </div>
          <div class="form-gorup">
            <button type="submit" [disabled]="!createEngagementForm.valid" class="btn btn-success float-right">Add</button>
          </div>
      </form>          
    </div>

    <div class="col-lg-7 pt-3">
      <div class="table-responsive">   
        <table class="table table-striped table-hover text-center">
          <thead>
              <tr>
                <th>Workplace</th>
                <th>Employment status</th>
                <th>Salary</th>
                <th>From</th>
                <th>To</th>
            </tr>
          </thead>
          <tbody *ngIf="existingEngagements.length !== 0">
            <tr *ngFor="let data of existingEngagements">
              <td>{{data.workplaceName}}</td>
              <td>{{data.employmentStatusName}}</td>
              <td>{{data.salary}}</td>
              <td>{{data.dateFrom | date }}</td>
              <td>{{data.dateTo | date }}</td>
            </tr>
          </tbody>                     
        </table>
      </div>
        <div *ngIf="existingEngagements.length === 0" class="alert alert-danger text-center" role="alert">
            Employee doesn't have assigned engagement
        </div>                     
    </div>
</div>
